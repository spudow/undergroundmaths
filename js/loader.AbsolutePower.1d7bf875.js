(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{"+0pD":function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?i:r).supported=i,t.unsupported=r},"06eB":function(e,t,n){var i=Array.prototype.slice,r=n("kgfz"),o=n("+0pD"),s=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var u,l;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=i.call(e),t=i.call(t),s(e,t,n));if(c(e)){if(!c(t))return!1;if(e.length!==t.length)return!1;for(u=0;u<e.length;u++)if(e[u]!==t[u])return!1;return!0}try{var d=r(e),h=r(t)}catch(f){return!1}if(d.length!=h.length)return!1;for(d.sort(),h.sort(),u=d.length-1;u>=0;u--)if(d[u]!=h[u])return!1;for(u=d.length-1;u>=0;u--)if(l=d[u],!s(e[l],t[l],n))return!1;return typeof e==typeof t}(e,t,n))};function a(e){return null==e}function c(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},"64vW":function(e,t,n){"use strict";var i=n("ERkP"),r=i.createContext({heightsReady:!0});t.a=r},A9rn:function(e,t,n){"use strict";n("+KXO"),n("1t7P"),n("LW0h"),n("daRM"),n("jwue"),n("+oxZ"),n("FtHn");var i=n("KEM+"),r=n.n(i);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=s(s({},n("IRWI").a),{},{pinToTopWhenAtTop:!0});t.a=a},FwSR:function(e,t,n){"use strict";n.r(t),n.d(t,"resetIsModalScrollerRendered",(function(){return xe})),n.d(t,"default",(function(){return ke}));n("OZaJ");var i=n("RhWx"),r=n.n(i),o=n("VrFO"),s=n.n(o),a=n("Y9Ll"),c=n.n(a),u=n("1Pcy"),l=n.n(u),d=n("5Yy7"),h=n.n(d),f=n("N+ot"),p=n.n(f),m=n("AuHH"),_=n.n(m),v=n("KEM+"),g=n.n(v),y=(n("z84I"),n("XygZ"),n("hBpG"),n("5BYb"),n("ERkP")),I=function(){function e(t,n,i,r,o){s()(this,e),this.id=t,this._renderer=i,this.canBeAnchor=r,this.data=n,this.sortIndex=o}return c()(e,[{key:"render",value:function(e){return(0,this._renderer)(this.data,e)}}]),e}(),b=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"-1";return new I(e,t,n,i,r)},w=(n("yH/f"),Object.freeze({FocusedItem:"focusedItem",Anchor:"anchor"})),R=function(e){return{anchor:e,type:w.Anchor}},T=function(e){return{itemId:e,type:w.FocusedItem}},O=n("OrGc"),S=n("hACr"),P=n("7N4s"),A=n("A9rn"),E=n("Resy"),H=function(){function e(t){var n=t.viewportRect,i=t.listRect,r=t.listLength,o=t.renderedItems;s()(this,e),this._viewportRect=n,this._listRect=i,this._listLength=r,this._renderedItems=o}return c()(e,[{key:"getForList",value:function(){return this._listRect}},{key:"getForViewport",value:function(){return this._viewportRect}},{key:"getListLength",value:function(){return this._listLength}},{key:"getRenderedItems",value:function(){return this._renderedItems}}]),e}(),F=n("oi7R"),x=n("Lqdf"),k=n("aWzz"),j=n("oQhu"),M=n("+d3d"),C=n("fs1G"),L=(n("+KXO"),n("1t7P"),n("daRM"),n("FtHn"),n("m3Bd")),V=n.n(L),U=(n("m9LP"),n("7x/C"),n("87if"),n("lTEL"),n("kYxP"),n("LqLs"),n("jwue"),n("+oxZ"),n("LW0h"),n("vfdX"),n("vrRf"),n("M+/F"),n("KOtZ"),n("zrc3")),B=n("7nmT"),D=n.n(B),z=function(e){var t;return null===(t=e.find((function(e){return e.focusable})))||void 0===t?void 0:t.id},N=n("dPJJ"),K=n("E6XO"),W=n("jHwr"),q=n("64vW"),Y=n("z0MJ"),J=n.n(Y),Z=n("pQ3Z"),X=n.n(Z),G=n("iBK2"),Q=n("aITJ"),$=n("Irs7"),ee=n("v6aA"),te=n("ddV6"),ne=n.n(te),ie=n("38/B"),re=n("06eB"),oe=n.n(re),se=n("GVND");function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var ce=function(){return window.performance?window.performance.now():Date.now()},ue="transform 0.15s linear",le=function(e){h()(n,e);var t=ae(n);function n(e,i){var r;s()(this,n),r=t.call(this,e,i),g()(l()(r),"_contentsFocusable",!1),g()(l()(r),"_perfReported",!1),g()(l()(r),"_shouldAnimateTranslate",!1),g()(l()(r),"_observeElement",(function(e){var t=r._resizeObserver;t&&(t.disconnect(),t.observe(e))})),g()(l()(r),"_handleResize",(function(e){var t=r.props,n=t.onHeightChanged,i=t.item,o=ne()(e,1)[0],s=(o&&Math.floor(o.contentRect.height))!==(r._currentHeight&&Math.floor(r._currentHeight));o&&s&&(r._currentHeight=o.contentRect.height,n(i.id,o.contentRect.height)),r._recordTTFV()})),g()(l()(r),"_setRef",(function(e){var t=r.props,n=t.item,i=t.setAPI;e?(r._element=e,i(n.id,l()(r)),r._observeElement(e)):(i(n.id,void 0),r._element=void 0)})),g()(l()(r),"_setIsItemFocusable",(function(e){r._contentsFocusable=e})),g()(l()(r),"_handleAnimationStarted",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;r._resizeObserver&&r._resizeObserver.disconnect(),r.props.onAnimationStarted(r.props.item.id,e),r._animationTTLTimeoutId&&clearTimeout(r._animationTTLTimeoutId),r._animationTTLTimeoutId=setTimeout(r._handleAnimationEnded,1e3)})),g()(l()(r),"_handleAnimationEnded",(function(){r._animationTTLTimeoutId&&(clearTimeout(r._animationTTLTimeoutId),r._animationTTLTimeoutId=null),r._element&&r._observeElement(r._element),r.props.onAnimationEnded(r.props.item.id)})),g()(l()(r),"_handleHeightChanged",(function(e){r._currentHeight=e,r.props.onHeightChanged(r.props.item.id,e)}));var o=Q.b.isSafari()?window.PolyfillResizeObserver:window.ResizeObserver;return r._resizeObserver=new o(r._handleResize),r._animationContext={onAnimationEnded:r._handleAnimationEnded,onAnimationStarted:r._handleAnimationStarted,onHeightChanged:r._handleHeightChanged},r._perfStart=ce(),r._shouldUseTopPositioning=Q.b.isMobileOS()&&Q.b.isSafari(),r}return c()(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.item,i=t.offset,r=t.visible,o=t.shouldAnimate;return this._shouldAnimateTranslate=e.offset!==i&&e.visible===r,!oe()(e.item,n)||e.offset!==i||e.visible!==r||e.shouldAnimate!==o}},{key:"componentWillUnmount",value:function(){this._animationTTLTimeoutId&&(clearTimeout(this._animationTTLTimeoutId),this.props.onAnimationEnded(this.props.item.id)),this._resizeObserver&&this._resizeObserver.disconnect(),this._resizeObserver=void 0}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.item,i=t.setAPI;e.item.id!==n.id&&(i(e.item.id,void 0),i(n.id,this)),this._recordTTFV()}},{key:"getElement",value:function(){return this._element}},{key:"isFocusable",value:function(){return this._contentsFocusable}},{key:"measureHeight",value:function(){return this._currentHeight||(this._currentHeight=this._element?this._element.getBoundingClientRect().height:0),this._currentHeight}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.offset,i=e.visible,r=e.shouldAnimate,o=e.translationTransitionStyle,s=this._shouldAnimateTranslate&&!ie.a.reducedMotionEnabled?o:"opacity 0.3s ease-out";return y.createElement(se.a.Provider,{value:this._animationContext},y.createElement("div",{ref:this._setRef,style:{position:"absolute",opacity:i?void 0:.01,width:"100%",top:this._shouldUseTopPositioning?"".concat(n,"px"):void 0,transform:this._shouldUseTopPositioning?void 0:"translateY(".concat(n,"px)"),transition:r&&!this._isAnimationDisabled?s:void 0}},t.render(this._setIsItemFocusable)))}},{key:"_recordTTFV",value:function(){var e=this.props,t=e.item,n=e.onVisible,i=e.visible;void 0!==this._currentHeight&&!this._perfReported&&i&&(n(t.id,ce()-this._perfStart),this._perfReported=!0)}}]),n}(y.Component);g()(le,"contextType",ee.a),g()(le,"defaultProps",{translationTransitionStyle:ue});var de=n("VY6S"),he=n("Qyxo"),fe=n("xN10"),pe=n("mN6z"),me=n("qdp+"),_e=n("/NU0"),ve=n("6vUc"),ge=n("jat/"),ye=n("tn7R"),Ie=n("Myq3");function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var Te={},Oe=function(e){var t=e.cssPixels,n=e.dpr;return Math.ceil(t*n)/n},Se=function(e){h()(n,e);var t=Re(n);function n(e,i){var r;s()(this,n),r=t.call(this,e,i),g()(l()(r),"_areAnchorsInvalidated",!1),g()(l()(r),"_cells",new Map),g()(l()(r),"_cellAnimations",new Set),g()(l()(r),"_cellAnimationStyle",ue),g()(l()(r),"_isFullScreened",!1),g()(l()(r),"_isIdle",!0),g()(l()(r),"_pendingHeightUpdates",new Map),g()(l()(r),"_previousScrollPosition",0),g()(l()(r),"_renderedItemsStatus",new Set),g()(l()(r),"_rootRef",y.createRef()),g()(l()(r),"_slice",{start:0,end:0}),g()(l()(r),"_shouldScribeNextScroll",!0),g()(l()(r),"_visibilityMeasurements",new Map),g()(l()(r),"_handleScroll",(function(){r._isInitialAnchoring||r._viewport.scrollY()<0||(r._isIdle=!1,r._updateScrollEnd(),r._scheduleCriticalUpdateThrottled())})),g()(l()(r),"_updateScrollEnd",Object(de.a)((function(){var e=r.props,t=e.analytics,n=e.onScrollEnd,i=r._viewport.scrollY()-r._previousScrollPosition;r._previousScrollPosition=r._viewport.scrollY(),r._shouldScribeNextScroll&&Math.abs(i)>100&&t.scribe({action:"scroll",data:{event_value:i}}),r._shouldScribeNextScroll=!0,r._isIdle=!0,n(),r._scheduleCriticalUpdate()}),r.context.featureSwitches.isTrue("responsive_web_scroller_larger_compromise_enabled")?500:100)),g()(l()(r),"_handleProgrammaticScroll",(function(){r._shouldScribeNextScroll=!1})),g()(l()(r),"_handleEnterFullscreen",(function(){r._isFullScreened=!0})),g()(l()(r),"_handleExitFullscreen",(function(){r._isFullScreened=!1,r._scheduleCriticalUpdate()})),g()(l()(r),"_getPositioningContext",Object(j.a)((function(e){return{heightsReady:e}}))),g()(l()(r),"_getFinalRenderedItemsMemoized",Object(j.a)((function(e,t){var n=r._getItemMapMemoized(e);return Object(he.a)(t,(function(e){var t=e.itemId,i=V()(e,["itemId"]),r=n.get(t);return r&&we(we({},i),{},{item:r})}))}))),g()(l()(r),"_getItemMapMemoized",Object(j.a)((function(e){var t=new Map;return e.forEach((function(e){t.set(e.id,e)})),t}))),g()(l()(r),"_getViewportOffsetCorrection",(function(){var e=r._rootRef.current&&r._rootRef.current.getBoundingClientRect();if(!e||!r._viewport)return 0;var t=r._viewport instanceof F.a?0:r._viewport.getRect()._top;return Oe({cssPixels:e.top-t,dpr:r._devicePixelRatio})})),g()(l()(r),"_getItemPositionsMap",(function(e){var t=r.props.list,n=r._getDistanceFromTop(e.itemId),i=e.offset-n,o={};return t.forEach((function(e){var t=r._getHeight(e);o[e.id]={item:e,rectangle:new E.a(i,t)},i+=t})),o})),g()(l()(r),"_getIsHeightsReady",(function(e){return Object(fe.a)(e,(function(e){var t=e.itemId;return r._heights.has(t)}))})),g()(l()(r),"_updatePositioning",(function(e){var t=e.renderedItems,n=e.relativeViewportRect,i=e.firstItem,o=e.height,s=r.props,a=s.list,c=s.onPositionUpdate;r._getIsHeightsReady(t)&&c(new H({viewportRect:n,listRect:new E.a(i?i.rectangle.getTop():0,o),listLength:a.length,renderedItems:t.map((function(e){return{id:e.itemId,rectangle:new E.a(e.offset,r._getHeightForItemId(e.itemId))}}))}))})),g()(l()(r),"_getAnchorItemCandidates",(function(){var e=r.props.analytics,t=r._getFinalRenderedItems(),n=t.filter((function(e){var t=e.item;return t.canBeAnchor&&(r._isInitialAnchoring||!!r._heights.get(t.id))}));if(r._areAnchorsInvalidated){var i=t.filter((function(e){var t,n=e.item,i=null===(t=r._previousItemMap.get(n.id))||void 0===t?void 0:t.sortIndex;return i===G.a||n.sortIndex===G.a||i===n.sortIndex}));if(i.length!==t.length){if(e.scribe({element:"scroller",action:"hoisted_anchor_invalidation"}),r.context.featureSwitches.isTrue("responsive_web_hoisting_anchor_invalidation_enabled"))return i}else e.scribe({element:"scroller",action:"no_hoisted_anchor_invalidation"})}return n})),g()(l()(r),"_handleAnimationStarted",(function(e,t){r._cellAnimations.add(e),t&&(r._cellAnimationStyle=t)})),g()(l()(r),"_handleAnimationEnded",(function(e){r._cellAnimations.delete(e),r._cellAnimationStyle=ue})),g()(l()(r),"_handleItemVisible",(function(e,t){r._visibilityMeasurements.has(e)||r._visibilityMeasurements.set(e,t)})),g()(l()(r),"_reportVisibilityMeasurements",(function(){if(r._visibilityMeasurements.size){var e=0;r._visibilityMeasurements.forEach((function(t){return e+=t}));var t=Math.round(e/r._visibilityMeasurements.size),n=Q.b.isDesktopOS()?"scroller_v3":"scroller_v3_mobile";K.c("scroller:ttfv:".concat(n),{duration_ms:t}),r._visibilityMeasurements.clear()}})),g()(l()(r),"_updateItemHeight",(function(e,t){r._pendingHeightUpdates.set(e,t),(Object(fe.a)(r.state.renderedItems,(function(e){var t=e.itemId;return r._heights.has(t)||r._pendingHeightUpdates.has(t)}))||r._pendingHeightUpdates.size>50)&&(r._update(),r._pendingHeightUpdates.clear())})),g()(l()(r),"_handleHeightChanged",(function(e,t){r._heights.get(e)!==t&&(r._cellAnimations.has(e)?r._scheduleCriticalUpdate():r._updateItemHeight(e,t))})),g()(l()(r),"_setItemRef",(function(e,t){t?(r._cells.set(e,t),r._renderedItemsStatus.add(e)):(r._cells.delete(e),r._renderedItemsStatus.delete(e))})),r._viewport=e.viewport,r._devicePixelRatio=window.devicePixelRatio||1,r.state={renderedItems:[],listHeight:0,shouldAnimate:!1};var o=r.props.cacheKey;return o&&Te.hasOwnProperty(o)?r._heights=Te[o]:(r._heights=new Map,Te[o]=r._heights),r._scheduleCriticalUpdate=Object(W.a)((function(){return r._update()}),window.requestAnimationFrame),r._scheduleUpdate=window.requestIdleCallback?Object(W.a)((function(){r._update()}),window.requestIdleCallback):r._scheduleCriticalUpdate,r._scheduleCriticalUpdateThrottled=Object(M.a)((function(){r._scheduleCriticalUpdate()}),100,{trailing:!0}),r._scheduleUpdateDebounced=Object(de.a)(r._scheduleUpdate,250),r._removeViewportResizeHandler=r._viewport.addRectChangeListener(r._scheduleCriticalUpdateThrottled),window.scroller=l()(r),r}return c()(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.listHeight,i=t.shouldAnimate,r=t.renderedItems,o=this._getIsHeightsReady(r);return y.createElement(q.a.Provider,{value:this._getPositioningContext(o)},y.createElement("div",{ref:this._rootRef,style:{position:"relative",minHeight:n}},this._getFinalRenderedItems().map((function(t){var n=t.item,r=t.offset,o=t.visible;return y.createElement(le,{item:n,key:n.id,offset:r,onAnimationEnded:e._handleAnimationEnded,onAnimationStarted:e._handleAnimationStarted,onHeightChanged:e._handleHeightChanged,onVisible:e._handleItemVisible,setAPI:e._setItemRef,shouldAnimate:i,translationTransitionStyle:e._cellAnimationStyle,visible:o})}))))}},{key:"shouldComponentUpdate",value:function(e,t){return!X()(this.props,e)||!Object(pe.a)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this;e.list!==this.props.list&&(this._isInitialAnchoring||(this._previousItemMap=new Map,e.list.forEach((function(e){t._previousItemMap.set(e.id,e)})),this._areAnchorsInvalidated=!0,this._shouldPinToTop()&&e.list.length!==this.props.list.length&&this.props.analytics.scribe({element:"scroller",action:"pin_to_top_attempt"})),this._scheduleCriticalUpdate()),e.cacheKey!==this.props.cacheKey&&(this._hasUserChangedFocus=!1)}},{key:"componentDidMount",value:function(){var e=this;this._removeScrollHandler=this._viewport.addScrollListener(this._handleScroll),this._removeProgrammaticScrollHandler=this._viewport.addProgrammaticScrollListener(this._handleProgrammaticScroll),this._removeFullscreenEnterHandler=N.a(this._handleEnterFullscreen),this._removeFullscreenExitHandler=N.b(this._handleExitFullscreen);var t=this._getInitialRenderedItems();if(this.props.isManualScrollRestoration&&this._viewport.scrollBy(-1),this._isInitialAnchoring=this.context.featureSwitches.isTrue("responsive_web_scroller_initial_perf_enabled"),t.length>0){var n=this._getDocumentViewportHeight();this._isInitialAnchoring=!0,this.setState({renderedItems:t,shouldAnimate:!0,listHeight:n},(function(){var t=e.props.initialAnchor;t&&t.type===w.Anchor?(e._viewport.scrollBy(e._getViewportOffsetCorrection()),t.anchor.wasFocused&&e._updateFocusToItem(t.anchor.id)):t&&t.type===w.FocusedItem&&e._updateFocusToItem(t.itemId),window.requestAnimationFrame((function(){return window.requestAnimationFrame((function(){return e._scheduleCriticalUpdate()}))}))}))}else this._update()}},{key:"componentWillUnmount",value:function(){this._removeScrollHandler&&this._removeScrollHandler(),this._removeProgrammaticScrollHandler&&this._removeProgrammaticScrollHandler(),this._removeFullscreenEnterHandler&&this._removeFullscreenEnterHandler(),this._removeFullscreenExitHandler&&this._removeFullscreenExitHandler(),this._removeViewportResizeHandler&&this._removeViewportResizeHandler(),this._reportVisibilityMeasurements()}},{key:"_getDocumentViewportHeight",value:function(){var e;return(null===(e=document.documentElement)||void 0===e?void 0:e.clientHeight)||0}},{key:"_getFinalRenderedItems",value:function(){var e=this.props.list,t=this.state.renderedItems;return this._getFinalRenderedItemsMemoized(e,t)}},{key:"_getInitialRenderedItems",value:function(){var e=this.props,t=e.initialAnchor,n=e.list,i=[];if(!t)return i;if(t.type===w.FocusedItem){var r=Object(me.a)(n,(function(e){return e.id===t.itemId?{itemId:e.id,offset:0,visible:!0}:void 0}));r&&i.push(r)}else if(t.type===w.Anchor&&Object(_e.a)(t.anchor.distanceToViewportTop)){for(var o=t.anchor,s=this._getDocumentViewportHeight(),a=o.distanceToViewportTop||0,c=n.findIndex((function(e){return e.id===o.id})),u=a,l=c;l>-1&&l<n.length&&u<s;){var d=n[l],h=this._heights.get(d.id);if(!Object(_e.a)(h))break;i.push({itemId:d.id,offset:u,visible:!0}),u+=h,l+=1}for(u=a,l=c-1;l>-1&&u>0;){var f=n[l],p=this._heights.get(f.id);if(!Object(_e.a)(p))break;u-=p,i.unshift({itemId:f.id,offset:u,visible:!0}),l-=1}}return i}},{key:"getAnchors",value:function(){var e=this,t=this._rootRef.current&&this._rootRef.current.getBoundingClientRect(),n=this._measureRelativeViewportRect();return t&&n?this._getItemsWithin(n).filter((function(e){return e.item.canBeAnchor})).map((function(t){return{id:t.item.id,distanceToViewportTop:Oe({cssPixels:t.offset+e._getViewportOffsetCorrection(),dpr:e._devicePixelRatio}),wasFocused:e._hasUserChangedFocus&&t.item.id===e._activeEntryId}})):[]}},{key:"_update",value:function(){var e=this._measureRelativeViewportRect();if(e&&!this._isFullScreened){var t=this._getAnchor(e);this._measureHeights(),t&&(this._updateRenderedItems(t,e),this._areAnchorsInvalidated=!1)}}},{key:"_getSliceForCandidates",value:function(e,t,n){var i=Object(ve.a)(e),r=Object(ge.a)(e);return{start:i?t.indexOf(n[i.itemId]):0,end:r?t.indexOf(n[r.itemId])+1:0}}},{key:"_getRenderCandidates",value:function(e,t){var n=this,i=this.props,r=i.minimumOffscreenToViewportRatio,o=i.preferredOffscreenToViewportRatio,s=He(t,r),a=He(t,o),c=this._isIdle&&!this._isInitialAnchoring,u=this._getItemPositionsMap(e),l=Object(ye.a)(u),d=l.filter((function(e){e.item;return e.rectangle.doesIntersectWith(c?a:s)})).map((function(e){var t=e.item,i=e.rectangle;return{itemId:t.id,offset:i.getTop(),visible:n._heights.has(t.id)}})),h=this._getSliceForCandidates(d,l,u),f=function(e,t,n){if(n)return t;if(t.start>=e.start&&t.end<=e.end&&e.end-e.start<=50)return e;if(t.start>=e.end||t.end<=e.start)return t;var i=Math.max(e.start-t.start,t.end-e.end,0);return{start:Math.min(e.start+i,t.start),end:Math.max(e.end-i,t.end)}}(this._slice,h,c),p=l.slice(f.start,f.end).map((function(e){var t=e.item,i=e.rectangle;return{itemId:t.id,offset:i.getTop(),visible:n._heights.has(t.id)}}));return{itemPositions:l,newRenderedItems:p,slice:f,arePreferredItemsRendered:c}}},{key:"_updateRenderedItems",value:function(e,t){var n=this,i=this._getRenderCandidates(e,t),r=i.newRenderedItems,o=i.itemPositions,s=i.arePreferredItemsRendered,a=i.slice,c=0!==this._cellAnimations.size,u=0!==this._getListOffset(e),l=Object(ve.a)(o),d=Object(ge.a)(o),h=l&&d?d.rectangle.getBottom()-l.rectangle.getTop():0,f=h+this._calculateHeadroom(o,t),p=this._getIsHeightsReady(r),m=!(Q.b.isSafari()||Q.b.isIOS()),_=!c&&p&&(this._isIdle||m||f<=t.getHeight())||p&&this._isInitialAnchoring,v=r;if(this._slice=a,p&&(this._isInitialAnchoring=!1),u&&_){var g=this._normalization(e,r),y=g.offset,I=g.renderedItems;v=I,this.setState({renderedItems:I,listHeight:f,shouldAnimate:!u},(function(){var e=t;0!==y&&(n._viewport.scrollBy(-y),e=n._measureRelativeViewportRect()),e&&n._updatePositioning({renderedItems:v,relativeViewportRect:e,firstItem:l,height:h})}))}else this.setState({renderedItems:r,listHeight:f,shouldAnimate:!0},(function(){!u&&s||n._scheduleUpdateDebounced(),n._updatePositioning({renderedItems:v,relativeViewportRect:t,firstItem:l,height:h})}))}},{key:"_normalization",value:function(e,t){var n=this._getListOffset(e);return 0!==n?{offset:n,renderedItems:t.map((function(e){var t=e.offset;return we(we({},V()(e,["offset"])),{},{offset:t-n})}))}:{offset:0,renderedItems:t}}},{key:"_calculateHeadroom",value:function(e,t){var n=this.props.withHeadroom,i=Object(Ie.a)(e,(function(e){return e.item.canBeAnchor})),r=Object(ge.a)(e);if(!r||!n)return 0;var o=r.rectangle.getBottom()-(i?i.rectangle.getTop():r.rectangle.getTop());return Math.max(0,t.getHeight()-o)}},{key:"_getListOffset",value:function(e){if(!e)return 0;var t=this._getDistanceFromTop(e.itemId);return e.offset-t}},{key:"_shouldPinToTop",value:function(){var e=this._measureRelativeViewportRect();return!this._isInitialAnchoring&&this.props.pinToTopWhenAtTop&&e&&e.getTop()<=0}},{key:"_getAnchor",value:function(e){var t=this;if(this._shouldPinToTop()){var n=Object(ve.a)(this.props.list);return n?{itemId:n.id,offset:0}:void 0}var i=function(t){var n,i,r=(n=t,i=e,Math.max(0,Math.min(n.getBottom(),i.getBottom())-Math.max(n.getTop(),i.getTop())));return(t.getHeight()>0?r/t.getHeight():0)>.01?1:0},r=function(t){return t.getBottom()-e.getTop()},o=this._getAnchorItemCandidates(),s=Ee(o,(function(e,n){var o=new E.a(e.offset,t._getHeight(e.item)),s=new E.a(n.offset,t._getHeight(n.item));return i(o)-i(s)||r(s)-r(o)}));if(s)return{itemId:s.item.id,offset:s.offset};var a=Object(ve.a)(o);if(a)return{itemId:a.item.id,offset:a.offset};var c=Object(ve.a)(this.props.list);return c?{itemId:c.id,offset:0}:void 0}},{key:"_measureRelativeViewportRect",value:function(){var e=this._rootRef.current;if(e)return this._viewport.getRect().translateBy(-e.getBoundingClientRect().top)}},{key:"_getHeight",value:function(e){var t;return this._getHeightForItemId(e.id,null===(t=e.data)||void 0===t?void 0:t.type)}},{key:"_getHeightForItemId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.props.assumedItemHeight,i=this._heights.get(e),r=Object(_e.a)(i)?i:"function"==typeof n?n(t,this.context.featureSwitches.isTrue("responsive_web_scroller_initial_perf_enabled")):n;return Oe({cssPixels:r,dpr:this._devicePixelRatio})}},{key:"_getDistanceFromTop",value:function(e){var t=this,n=this.props.list,i=n.findIndex((function(t){return t.id===e}));return i>=0?n.slice(0,i).reduce((function(e,n){return t._getHeight(n)+e}),0):0}},{key:"_getItemsWithin",value:function(e){var t=this;return this._getFinalRenderedItems().filter((function(n){var i=n.item,r=n.offset;return new E.a(r,t._getHeight(i)).doesIntersectWith(e)}))}},{key:"_measureHeights",value:function(){var e=this;this._cells.forEach((function(t,n){e._heights.set(n,t.measureHeight())}))}},{key:"_getRenderedItemsWithFocusability",value:function(){var e=this;return this._getFinalRenderedItems().map((function(t){var n=t.item,i=t.visible,r=e._cells.get(n.id);return{id:n.id,focusable:!(!r||!r.isFocusable()),visible:i}}))}},{key:"_findTopmostVisibleId",value:function(){var e=this,t=this._measureRelativeViewportRect(),n=t&&this._getFinalRenderedItems().find((function(n){var i=n.item,r=n.offset;return new E.a(r,e._getHeight(i)).doesIntersectWith(t)}));return n&&n.item.id}},{key:"adjustFocusBy",value:function(e){this._hasUserChangedFocus=!0;var t=this._getRenderedItemsWithFocusability(),n=this._activeEntryId&&function(e,t,n){var i=e?Object(U.a)(n,(function(t){return t.id===e})):-1;if(i>=0)for(var r=i>=0?i+t:0;r>=0&&r<n.length;r+=t)if(n[r].focusable)return n[r].id;return i>=0?e:void 0}(this._activeEntryId,e,t);if(!n){var i=this._findTopmostVisibleId();n=i?function(e,t){var n,i=Object(U.a)(t,(function(t){return t.id===e}));if(i>=0){var r=t.find((function(e,t){return t>=i&&e.focusable}));n=r?r.id:void 0}return n||z(t)}(i,t):z(t)}n&&this._updateFocusToItem(n)}},{key:"_updateFocusToItem",value:function(e,t){if(e!==this._activeEntryId){var n=this._getRenderedItemsWithFocusability().find((function(t){return t.visible&&t.id===e})),i=this._cells.get(e),r=i&&i.getElement();n&&(this._activeEntryId=e,r&&function(e,t,n){var i=D.a.findDOMNode(e),r=i&&i instanceof window.HTMLElement&&i.querySelector("a, [tabindex='0']");if(r){r.scrollIntoView(n),r.focus();var o=(t||F.a.root()).getRect().getTop();o>0&&window.scrollBy(0,-1*o)}}(r,this.context.viewport,t))}}},{key:"scrollToTop",value:function(e){var t=this;this._hasUserChangedFocus=!0,this._viewport.scrollToTop(),e&&(this._update(),J()((function(){var e=t._getRenderedItemsWithFocusability(),n=z(e);n&&t._updateFocusToItem(n,{block:"nearest"})})))}},{key:"isAtTop",value:function(){var e=this._measureRelativeViewportRect();return!e||e.getTop()<50}}]),n}(y.Component);g()(Se,"contextType",ee.a),g()(Se,"defaultProps",{nearEndProximityRatio:1.75,nearStartProximityRatio:.25,assumedItemHeight:400,minimumOffscreenToViewportRatio:.5,preferredOffscreenToViewportRatio:2.5});var Pe,Ae=Object($.a)(Se),Ee=function(e,t){if(e.length)return e.reduce((function(e,n){return t(n,e)>0?n:e}))},He=function(e,t){var n=t*e.getHeight();return new E.a(e.getTop()-n,e.getHeight()+2*n)};function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var xe=function(){Pe=!1},ke=function(e){h()(n,e);var t=Fe(n);function n(e,i){var o;s()(this,n),o=t.call(this,e,i),g()(l()(o),"_renderer",y.createRef()),g()(l()(o),"_isModal",!1),g()(l()(o),"_getList",Object(j.a)((function(e,t,n,i,o,s){var a=[];return e&&a.push(b("$header","header",(function(){return e}),!0)),a.push.apply(a,r()(n.map((function(e){return b(o(e),e,i,!0,s&&s(e))})))),t&&a.push(b("$footer","footer",(function(){return t}),!1)),a}))),g()(l()(o),"_render",(function(e){var t,n=e.isModal,i=o.props,r=i.anchoring,s=i.assumedItemHeight,a=i.cacheKey,c=i.footer,u=i.header,l=i.identityFunction,d=i.initialAnchor,h=i.items,f=i.renderer,p=i.sortIndexFunction,m=i.withHeadroom,_=i.withKeyboardShortcuts,v=o._scrollRestorationAnchor[a],I=v?R(v):d?T(d.id):void 0;return n&&(o._isModal=!0,Pe=!0),y.createElement(S.a,{enabled:_,handlers:(t={},g()(t,O.d.refresh,o._handleKeyboardRefresh),g()(t,O.d.nextItem,o._handleKeyboardFocusNext),g()(t,O.d.previousItem,o._handleKeyboardFocusPrevious),t)},y.createElement(Ae,{assumedItemHeight:s,cacheKey:a,initialAnchor:I,isManualScrollRestoration:window.history&&"manual"===window.history.scrollRestoration,key:a,list:o._getList(u,c,h,f,l,p),onPositionUpdate:o._handlePositionUpdate,onScrollEnd:o._handleScrollEnd,pinToTopWhenAtTop:r.pinToTopWhenAtTop,ref:o._renderer,viewport:o._viewport,withHeadroom:m}))})),g()(l()(o),"_handleScrollEnd",(function(){o.props.onScrollEnd&&o.props.onScrollEnd()})),g()(l()(o),"_handlePositionUpdate",(function(e){var t=o.props.onItemsRendered;o._edgeProximity.handlePositioningUpdate(e),t&&t({positions:e.getRenderedItems(),viewport:e.getForViewport()}),o._preservePosition(o._customLocation)})),g()(l()(o),"_shouldPreventKeyboardShortcuts",(function(){return Pe&&!o._isModal})),g()(l()(o),"_handleKeyboardRefresh",Object(M.a)((function(){var e=o.props.onKeyboardRefresh;o._shouldPreventKeyboardShortcuts()||e&&e()}),1e3)),g()(l()(o),"_handleKeyboardFocusNext",(function(){!o._shouldPreventKeyboardShortcuts()&&o.adjustFocusBy(1)})),g()(l()(o),"_handleKeyboardFocusPrevious",(function(){!o._shouldPreventKeyboardShortcuts()&&o.adjustFocusBy(-1)}));var a=e.nearStartProximityRatio,c=e.nearEndProximityRatio;return o._edgeProximity=new x.b([{condition:x.a.nearTop(5),callback:function(e){return o.props.onAtStart(e)}},{condition:x.a.nearTopRatio(a),callback:function(e){return o.props.onNearStart(e)}},{condition:x.a.nearBottomRatio(c),callback:function(e){return o.props.onNearEnd(e)}},{condition:x.a.nearBottom(5),callback:function(e){return o.props.onAtEnd(e)}}]),o._viewport=e.viewport||o.context&&o.context.viewport||F.a.root(),o._loadStoredPosition(e,o.context),o}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.noItemsRenderer;return t.length?y.createElement(P.a.Consumer,null,this._render):n()}},{key:"componentDidMount",value:function(){(0,this.props.onPositionRestored)()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.cacheKey,i=t.onPositionRestored;n!==e.cacheKey&&i()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.cacheKey!==e.cacheKey&&(this._preservePosition(this._customLocation),this._loadStoredPosition(e,this.context))}},{key:"componentWillUnmount",value:function(){this._preservePosition(this._customLocation),this._isModal&&(Pe=!1)}},{key:"_preservePosition",value:function(e){if(e&&this._renderer.current){var t=this._renderer.current.getAnchors();e.savePosition(t)}}},{key:"_loadStoredPosition",value:function(e,t){var n=t.getCustomLocation;this._customLocation=n&&n();var i=[];if(this._customLocation){var r=this._customLocation.getSavedPosition();(i=r&&r.length?r:[]).length>0&&this._customLocation&&this._customLocation.claimScrollRestoration()}var o=i.find((function(t){var n=t.id;return t.wasFocused&&e.items.some((function(t){return e.identityFunction(t)===n}))}))||i.find((function(t){var n=t.id;t.distanceToViewportTop;return e.items.some((function(t){return e.identityFunction(t)===n}))}));this._scrollRestorationAnchor=g()({},e.cacheKey,o)}},{key:"adjustFocusBy",value:function(e){this._renderer.current&&this._renderer.current.adjustFocusBy(e)}},{key:"scrollToTop",value:function(e){this._renderer.current&&this._renderer.current.scrollToTop(e)}},{key:"isAtTop",value:function(){return!this._renderer.current||this._renderer.current.isAtTop()}}]),n}(y.PureComponent);g()(ke,"contextTypes",{viewport:k.object,getCustomLocation:k.func}),g()(ke,"defaultProps",{anchoring:A.a,onPositionRestored:C.a,onAtEnd:C.a,onAtStart:C.a,onNearEnd:C.a,onNearStart:C.a,onScrollEnd:C.a,nearEndProximityRatio:1.75,nearStartProximityRatio:.25,noItemsRenderer:function(){return null},assumedItemHeight:400,minimumOffscreenToViewportRatio:.5,preferredOffscreenToViewportRatio:2.5,withHeadroom:!0,withKeyboardShortcuts:!1})},GVND:function(e,t,n){"use strict";var i=n("ERkP"),r=i.createContext({onAnimationStarted:function(){},onAnimationEnded:function(){},onHeightChanged:function(){}});t.a=r},Lqdf:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n("VrFO"),r=n.n(i),o=n("Y9Ll"),s=n.n(o),a=(n("yH/f"),n("z84I"),n("jwue"),n("+oxZ"),n("Resy"),Object.freeze({MOVEMENT:"movement",LIST_UPDATE:"list_update",INITIAL_POSITION:"initial_position"})),c={nearTop:function(e){return function(t,n){return n.getTop()-t.getTop()<=e}},nearBottom:function(e){return function(t,n){return t.getBottom()-n.getBottom()<=e}},nearTopRatio:function(e){return function(t,n){var i=n.getHeight()*e;return n.getTop()-t.getTop()<=i}},nearBottomRatio:function(e){return function(t,n){var i=n.getHeight()*e;return t.getBottom()-n.getBottom()<=i}}},u=Object.freeze({INSIDE:"inside",OUTSIDE:"outside"}),l=function(e,t,n,i){return function(e,t){return!e&&t===u.INSIDE}(e,n)?a.INITIAL_POSITION:function(e,t){return e===u.OUTSIDE&&t===u.INSIDE}(e,n)?a.MOVEMENT:function(e,t){return e===u.INSIDE&&t===u.INSIDE}(e,n)&&i!==t?a.LIST_UPDATE:null},d=function(){function e(t){r()(this,e),this._handlers=t.map((function(e){return{zone:e,state:{}}}))}return s()(e,[{key:"handlePositioningUpdate",value:function(e){this._handlers.forEach((function(t){var n=t.zone,i=t.state,r=n.condition,o=n.callback,s=i.proximity,a=i.listLength,c=function(e,t){return e(t.getForList(),t.getForViewport())?u.INSIDE:u.OUTSIDE}(r,e),d=e.getListLength(),h=l(s,a,c,d);i.proximity=c,i.listLength=d,h&&o({triggerCause:h})}))}}]),e}()},XygZ:function(e,t,n){"use strict";var i=n("ax0f"),r=n("gIHd");i({target:"String",proto:!0,forced:n("sHxg")("anchor")},{anchor:function(e){return r(this,"a","name",e)}})},dPJJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));n("LqLs"),n("7x/C"),n("87if"),n("lTEL"),n("kYxP"),n("jwue"),n("LW0h"),n("z84I"),n("+oxZ");var i=n("6/RC"),r=new Set,o=new Set,s=!1;function a(){if(i.canUseDOM&&!s){var e=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"];["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","msfullscreenchange"].forEach((function(t){document.addEventListener(t,(function(){var t=e.map((function(e){return document[e]})).filter(Boolean)[0];t?r.forEach((function(e){return e(t)})):o.forEach((function(e){return e()}))}))}))}s=!0}var c=function(e){return s||a(),r.add(e),function(){return r.delete(e)}},u=function(e){return s||a(),o.add(e),function(){return o.delete(e)}}},jHwr:function(e,t,n){"use strict";t.a=function(e,t){var n=null,i=function(){n=null,e()};return function(){return n||(n=t(i)),n}}},kgfz:function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/loader.AbsolutePower.1d7bf875.js.map