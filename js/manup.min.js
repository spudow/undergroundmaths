var manUpObject,tagArray=[],linkArray=[],validMetaValues=[{name:"mobile-web-app-capable",manifestName:"display"},{name:"apple-mobile-web-app-capable",manifestName:"display"},{name:"apple-mobile-web-app-title",manifestName:"short_name"},{name:"application-name",manifestName:"short_name"},{name:"msapplication-TileColor",manifestName:"ms_TileColor"},{name:"msapplication-square70x70logo",manifestName:"icons",imageSize:"70x70"},{name:"msapplication-square150x150logo",manifestName:"icons",imageSize:"150x150"},{name:"msapplication-wide310x150logo",manifestName:"icons",imageSize:"310x150"},{name:"msapplication-square310x310logo",manifestName:"icons",imageSize:"310x310"}],validLinkValues=[{name:"apple-touch-icon",manifestName:"icons",imageSize:"152x152"},{name:"apple-touch-icon",manifestName:"icons",imageSize:"120x120"},{name:"apple-touch-icon",manifestName:"icons",imageSize:"76x76"},{name:"apple-touch-icon",manifestName:"icons",imageSize:"60x60"},{name:"apple-touch-icon",manifestName:"icons",imageSize:"57x57"},{name:"apple-touch-icon",manifestName:"icons",imageSize:"72x72"},{name:"apple-touch-icon",manifestName:"icons",imageSize:"114x114"},{name:"icon",manifestName:"icons",imageSize:"128x128"},{name:"icon",manifestName:"icons",imageSize:"192x192"}],generateFullMetaData=function(){for(var a=0;a<validMetaValues.length;a++)if(manUpObject[validMetaValues[a].manifestName])if("icons"==validMetaValues[a].manifestName)for(var b=manUpObject.icons,c=0;c<b.length;c++)b[c].sizes==validMetaValues[a].imageSize&&(validMetaValues[a].content=b[c].src);else validMetaValues[a].content=manUpObject[validMetaValues[a].manifestName],"display"==validMetaValues[a].manifestName&&"standalone"==manUpObject.display&&(validMetaValues[a].content="yes");return validMetaValues},generateFullLinkData=function(){for(var a=0;a<validLinkValues.length;a++)if(manUpObject[validLinkValues[a].manifestName])if("icons"==validLinkValues[a].manifestName)for(var b=manUpObject.icons,c=0;c<b.length;c++)b[c].sizes==validLinkValues[a].imageSize&&(validLinkValues[a].content=b[c].src);else validLinkValues[a].content=manUpObject[validLinkValues[a].manifestName];return validLinkValues},generateMetaArray=function(){for(var a=generateFullMetaData(),b=document.getElementsByTagName("head")[0],c=0;c<a.length;c++){var d=document.createElement("meta");d.name=a[c].name,d.content=a[c].content,b.appendChild(d)}},generateLinkArray=function(){for(var a=generateFullLinkData(),b=document.getElementsByTagName("head")[0],c=0;c<a.length;c++){var d=document.createElement("link");d.setAttribute("rel",a[c].name),d.setAttribute("sizes",a[c].imageSize),d.setAttribute("href",a[c].content),b.appendChild(d)}},generateObj=function(a){manUpObject=JSON.parse(a),generateLinkArray(),generateMetaArray()},makeAjax=function(a){if(window.XMLHttpRequest){/^https?:\/\//i.test(a)?fulURL=a:window.location.hostname+a;var b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&generateObj(b.responseText)},b.open("GET",a,!0),b.send()}},collectManifestObj=function(){for(var a=document.getElementsByTagName("link"),b=0;b<a.length;b++)a[b].rel&&"manifest"==a[b].rel&&makeAjax(a[b].href)},testForManifest=function(){collectManifestObj()}();