!function(){angular.module("cmAccountResetPassword",["cmCore"]).controller("ResetPasswordController",["$scope","Auth","UserAccount",function(a,b,c){a.viewModel={},a.viewModel.errors=[],a.resetPasswordData={},a.viewModel.resettingPassword=!1,a.clearErrors=function(){a.viewModel.errors=[]},a.resetPassword=function(){a.clearErrors(),a.viewModel.resetPasswordForm.$valid&&!a.viewModel.resettingPassword&&(a.viewModel.resettingPassword=!0,c.resetPassword(a.resetPasswordData,function(){a.viewModel.resettingPassword=!1,b.setCurrentUser(null),location.href="/user/login?message=ResetPasswordSuccess"},function(b){a.viewModel.resettingPassword=!1,b.data&&b.data.errorMessages?a.viewModel.errors=b.data.errorMessages:a.viewModel.errors=["An error occured whilst trying to reset the password."]}))}}])}();