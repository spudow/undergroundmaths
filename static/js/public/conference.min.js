!function(){angular.module("cmConference",["MathematicalClassroomCore"]).controller("ConferenceController",["$scope","$timeout","$sce","ConferenceDay","Auth",function(a,b,c,d,e){if(a.viewModel={},a.viewModel.loaded=!1,a.viewModel.conferenceDays=[],a.viewModel.pageSize=20,a.viewModel.totalRows=0,a.viewModel.currentPage=0,a.viewModel.initalized=!1,a.viewModel.getCurrentRow=function(){var b=a.viewModel.pageSize||0;return(a.viewModel.currentPage||0)*b},a.viewModel.pageChange=function(){cmHelper.setSessionStorage("conference.currentPage",JSON.stringify(a.viewModel.currentPage)),a.getConferenceDays()},a.$watch("viewModel.currentPage",function(){cmHelper.setSessionStorage("conference.currentPage",JSON.stringify(a.viewModel.currentPage))}),a.getConferenceDays=function(){a.viewModel.initalized=!0,d.queryPublic({startRow:a.viewModel.getCurrentRow(),maxRows:a.viewModel.pageSize},function(b){a.viewModel.conferenceDays=b.results,a.viewModel.totalRows=b.totalRows,a.viewModel.loaded=!0},function(){a.viewModel.loaded=!0})},a.getMapsUrl=function(a){return"https://www.google.co.uk/maps/place/"+encodeURIComponent(a.postcode)},a.scrollToSection=function(a){var b=$("#"+a);0!=b.length&&$("html, body").animate({scrollTop:b.offset().top},300)},sessionStorage["conference.currentPage"])try{a.viewModel.currentPage=JSON.parse(sessionStorage["conference.currentPage"])}catch(f){}a.viewModel.initialized||a.getConferenceDays()}])}();